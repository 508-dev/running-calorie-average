import{f as Xt,s as Yt,n as Vt,r as Zt,c as $t}from"../chunks/scheduler.FYonJeTQ.js";import{S as te,i as ee,e as s,s as _,t as T,z as ae,c as n,d as l,f as p,a as h,b as E,y as K,o as u,h as t,g as O,A as Kt,B as pt,j as W,C as Wt}from"../chunks/index.Clgj92EL.js";import{p as le}from"../chunks/stores.MDARKQP9.js";import{w as se,g as ne}from"../chunks/entry.BCxWOCTj.js";const oe=!1,_e=Object.freeze(Object.defineProperty({__proto__:null,ssr:oe},Symbol.toStringTag,{value:"Module"}));function re(){const a=se({}),{subscribe:v,set:i}=a;return localStorage.calorieMap&&i(JSON.parse(localStorage.calorieMap)),{subscribe:v,set:o=>{localStorage.calorieMap=JSON.stringify(o)},update:o=>{const d=o(Xt(a));localStorage.calorieMap=JSON.stringify(d),i(d)},reset:()=>{localStorage.calorieMap=JSON.stringify({}),i({})}}}const bt=re();function ie(a,v){const i=new Date(a);return i.setDate(i.getDate()+v),i.toDateString()}function k(a,v,i){const o=[];let d=0;const y=v/4;for(let m=0;m<v;m++){let D=ie(a,m*-1);if(i[D]?o.push(i[D]):d++,d>=y)return null}const f=o.reduce((m,D)=>m&&D?m+D:m);return f&&Math.round(f/v-d)}function ce(a){let v,i,o,d,y="<",f,m,D,J,X,r,Y=">",mt,at,S,w,Rt="Calories",Dt,g,lt,R,b,q,xt='<th class="svelte-daixlb">Running Avg. Length</th> <th class="svelte-daixlb">Daily Calorie Average</th>',gt,x,A,At="3 days",Ct,z,Z=(k(a[1],3,a[2])||M)+"",st,Tt,B,L,Bt="5 days",Et,H,$=(k(a[1],5,a[2])||M)+"",nt,St,P,U,Lt="2 weeks",yt,F,tt=(k(a[1],14,a[2])||M)+"",ot,wt,j,I,Pt="1 month",Nt,G,et=(k(a[1],30,a[2])||M)+"",rt,it,Q,N,Ot,ct,kt,Mt,Ut;return{c(){v=s("meta"),i=_(),o=s("nav"),d=s("button"),f=T(y),m=_(),D=s("h2"),J=T(a[1]),X=_(),r=s("button"),mt=T(Y),at=_(),S=s("section"),w=s("label"),w.textContent=Rt,Dt=_(),g=s("input"),lt=_(),R=s("section"),b=s("table"),q=s("tr"),q.innerHTML=xt,gt=_(),x=s("tr"),A=s("td"),A.textContent=At,Ct=_(),z=s("td"),st=T(Z),Tt=_(),B=s("tr"),L=s("td"),L.textContent=Bt,Et=_(),H=s("td"),nt=T($),St=_(),P=s("tr"),U=s("td"),U.textContent=Lt,yt=_(),F=s("td"),ot=T(tt),wt=_(),j=s("tr"),I=s("td"),I.textContent=Pt,Nt=_(),G=s("td"),rt=T(et),it=_(),Q=s("section"),N=s("button"),Ot=T("Click "),ct=T(a[0]),kt=T(" times to permanently reset all calorie recordings"),this.h()},l(e){const c=ae("svelte-1dvn8zx",document.head);v=n(c,"META",{name:!0,content:!0}),c.forEach(l),i=p(e),o=n(e,"NAV",{class:!0});var V=h(o);d=n(V,"BUTTON",{});var jt=h(d);f=E(jt,y),jt.forEach(l),m=p(V),D=n(V,"H2",{});var It=h(D);J=E(It,a[1]),It.forEach(l),X=p(V),r=n(V,"BUTTON",{});var Jt=h(r);mt=E(Jt,Y),Jt.forEach(l),V.forEach(l),at=p(e),S=n(e,"SECTION",{class:!0});var ut=h(S);w=n(ut,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(w)!=="svelte-ftxx6y"&&(w.textContent=Rt),Dt=p(ut),g=n(ut,"INPUT",{id:!0,type:!0,class:!0}),ut.forEach(l),lt=p(e),R=n(e,"SECTION",{class:!0});var qt=h(R);b=n(qt,"TABLE",{class:!0});var C=h(b);q=n(C,"TR",{"data-svelte-h":!0}),K(q)!=="svelte-of19ka"&&(q.innerHTML=xt),gt=p(C),x=n(C,"TR",{});var dt=h(x);A=n(dt,"TD",{class:!0,"data-svelte-h":!0}),K(A)!=="svelte-1bogp3e"&&(A.textContent=At),Ct=p(dt),z=n(dt,"TD",{class:!0});var zt=h(z);st=E(zt,Z),zt.forEach(l),dt.forEach(l),Tt=p(C),B=n(C,"TR",{});var ft=h(B);L=n(ft,"TD",{class:!0,"data-svelte-h":!0}),K(L)!=="svelte-1aqdiy8"&&(L.textContent=Bt),Et=p(ft),H=n(ft,"TD",{class:!0});var Ht=h(H);nt=E(Ht,$),Ht.forEach(l),ft.forEach(l),St=p(C),P=n(C,"TR",{});var vt=h(P);U=n(vt,"TD",{class:!0,"data-svelte-h":!0}),K(U)!=="svelte-wtss1h"&&(U.textContent=Lt),yt=p(vt),F=n(vt,"TD",{class:!0});var Ft=h(F);ot=E(Ft,tt),Ft.forEach(l),vt.forEach(l),wt=p(C),j=n(C,"TR",{});var ht=h(j);I=n(ht,"TD",{class:!0,"data-svelte-h":!0}),K(I)!=="svelte-cokjev"&&(I.textContent=Pt),Nt=p(ht),G=n(ht,"TD",{class:!0});var Gt=h(G);rt=E(Gt,et),Gt.forEach(l),ht.forEach(l),C.forEach(l),qt.forEach(l),it=p(e),Q=n(e,"SECTION",{});var Qt=h(Q);N=n(Qt,"BUTTON",{});var _t=h(N);Ot=E(_t,"Click "),ct=E(_t,a[0]),kt=E(_t," times to permanently reset all calorie recordings"),_t.forEach(l),Qt.forEach(l),this.h()},h(){document.title="Rolling Calorie Averages",u(v,"name","description"),u(v,"content","Get rolling averages of your calorie intake for the last 3 days, week, or month."),u(o,"class","svelte-daixlb"),u(w,"for","calories"),u(w,"class","svelte-daixlb"),u(g,"id","calories"),u(g,"type","number"),u(g,"class","svelte-daixlb"),u(S,"class","todays-calories svelte-daixlb"),u(A,"class","svelte-daixlb"),u(z,"class","svelte-daixlb"),u(L,"class","svelte-daixlb"),u(H,"class","svelte-daixlb"),u(U,"class","svelte-daixlb"),u(F,"class","svelte-daixlb"),u(I,"class","svelte-daixlb"),u(G,"class","svelte-daixlb"),u(b,"class","svelte-daixlb"),u(R,"class","calorie-averages svelte-daixlb")},m(e,c){t(document.head,v),O(e,i,c),O(e,o,c),t(o,d),t(d,f),t(o,m),t(o,D),t(D,J),t(o,X),t(o,r),t(r,mt),O(e,at,c),O(e,S,c),t(S,w),t(S,Dt),t(S,g),Kt(g,a[2][a[1]]),O(e,lt,c),O(e,R,c),t(R,b),t(b,q),t(b,gt),t(b,x),t(x,A),t(x,Ct),t(x,z),t(z,st),t(b,Tt),t(b,B),t(B,L),t(B,Et),t(B,H),t(H,nt),t(b,St),t(b,P),t(P,U),t(P,yt),t(P,F),t(F,ot),t(b,wt),t(b,j),t(j,I),t(j,Nt),t(j,G),t(G,rt),O(e,it,c),O(e,Q,c),t(Q,N),t(N,Ot),t(N,ct),t(N,kt),Mt||(Ut=[pt(d,"click",a[3]),pt(r,"click",a[4]),pt(g,"input",a[5]),pt(N,"click",a[6])],Mt=!0)},p(e,[c]){c&2&&W(J,e[1]),c&6&&Wt(g.value)!==e[2][e[1]]&&Kt(g,e[2][e[1]]),c&6&&Z!==(Z=(k(e[1],3,e[2])||M)+"")&&W(st,Z),c&6&&$!==($=(k(e[1],5,e[2])||M)+"")&&W(nt,$),c&6&&tt!==(tt=(k(e[1],14,e[2])||M)+"")&&W(ot,tt),c&6&&et!==(et=(k(e[1],30,e[2])||M)+"")&&W(rt,et),c&1&&W(ct,e[0])},i:Vt,o:Vt,d(e){e&&(l(i),l(o),l(at),l(S),l(lt),l(R),l(it),l(Q)),l(v),Mt=!1,Zt(Ut)}}}const M="Not enough data";function ue(a,v,i){let o;$t(a,bt,r=>i(2,o=r));let d=3;function y(r){const Y=new URLSearchParams;Y.set("date",r),ne(`?${Y.toString()}`)}let f="";le.subscribe(r=>i(1,f=r.url.searchParams.get("date"))),(!f||typeof f!="string"||isNaN(new Date(f).valueOf()))&&y(new Date().toDateString());function m(){const r=new Date(f);r.setDate(r.getDate()-1),y(r.toDateString())}function D(){const r=new Date(f);r.setDate(r.getDate()+1),y(r.toDateString())}function J(){o[f]=Wt(this.value),bt.set(o)}const X=()=>i(0,d--,d);return a.$$.update=()=>{a.$$.dirty&1&&d===0&&bt.reset(),a.$$.dirty&6&&o[f]===void 0&&bt.update(r=>({...r,[f]:null}))},[d,f,o,m,D,J,X]}class pe extends te{constructor(v){super(),ee(this,v,ue,ce,Yt,{})}}export{pe as component,_e as universal};
